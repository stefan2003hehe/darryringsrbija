<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="styles_sr.css">
    <link rel="stylesheet" href="styles_korpa.css">

    <link href="https://fonts.cdnfonts.com/css/fragment-core" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <title>Darry Ring Srbija</title>
</head>
<body>
    <header class="header">
       <div class="navigation"> <div class="logo">Darry Ring Srbija</div>
        <nav id="hehe">
            <a href="index.html">Home</a>
            <a href="katalog.html">Katalog</a>
            

            
        </nav>
        </div>

        
          <div class="header__search"><button class="search_button" onclick="toggleModal()" ></button></div>
          
          <a href="korpa.html" class="korpica_container">
            <button class="korpica_button"></button>
            <span id="cart-count">0</span>
          </a>

          <div id="header__more" class="but header__more"><button class="buto more_button" onclick="toggleMore()" ></button></div>
          <div id="header__more_close" class="but header__more_close"><button class="buto more_close_button" onclick="toggleMoreClose()" ></button></div>

    </header>
    

  
    
    <div class="search-modal" id="searchModal">
      <div class="search-modal__content" id="contentModal">
        
        <form class="form" action="/search" method="get" role="search">
          <input class="field__input" id="field__input" type="search" name="q" placeholder="Search..." oninput="fetchSuggestions(this.value)"/>
          <div class="suggestions-box" id="suggestionsBox">
            <!-- Suggested products će se pojaviti ovde -->
          </div>

          
           
        </form>
        <button class="modal__close-button" onclick="toggleModal()" > </button>
      </div>
    </div>
     
      <div class="more__content" id="contentMore">
        <div class="menu-drawer__navigation-container">
          <nav class="menu-drawer__navigation">
           
               <a  href="index.html" ><div class="drugiNav">Home</div></a>
              <a  href="katalog.html" ><div class="drugiNav Home">Catalog</div></a>
              
          </nav>
     
          <div class="more__content_lower_part">
            <a href="http://instagram.com/s" id="instaBtn2"><img src="slike/instagram_ikonica2.JPG" width="40px" height="40px"></a>
          </div>
          
       
        </div>

    </div>
   


<section class="mains-ection">
    <h1 class="your-cart">Your cart</h1>
    <div id="cart-items"></div>
    

    <div class="cart-buttons" id="cart-buttons">
    <p class="cart-summary">Estimated total: <span id="cart-total">0.00 RSD</span></p>
    <button class="checkout-btn"  id="openModal" onclick="checkout()">Check out</button>
    
    </div> 
    <a href="katalog.html"><button  class="checkout-btn continue-shopping" id="continue-shopping" >Nastavite sa šopingom</button></a>
  </section> 
     

<!-- Modal prozor -->
<div id="checkoutModal" class="modal">
  <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Unesite podatke za porudžbinu</h2>

      <div id="checkoutItems"></div> <!-- Ovdje će se ubacivati proizvodi iz korpe -->

     

   
    <form id="orderForm">
    <label for="ime">Ime <span class="required">*</span></label>
    
    <div class="input-group">
      <span class="icon">
          <i class="fas fa-user"></i> <!-- FontAwesome ikonica -->
      </span>
      <input type="text" id="ime" placeholder="Vaše ime" required>
    </div>
    

    <label for="ime">Prezime <span class="required">*</span></label>
     
    <div class="input-group">
      <span class="icon">
          <i class="fas fa-user"></i> <!-- FontAwesome ikonica -->
      </span>
      <input type="text" id="prezime" placeholder="Vaše Prezime" required>
    </div>

    <label for="ime">Broj mobilnog telefona <span class="required">*</span></label>
     
    <div class="input-group">
      <span class="icon">
          <i class="fas fa-phone"></i> <!-- FontAwesome ikonica -->
      </span>
      <input type="text" id="telefon" placeholder="Vaše broj telefona" required>
    </div>

    <label for="ime">Grad <span class="required">*</span></label>
     
    <div class="input-group">
      <span class="icon">
          <i class="fas fa-location-dot"></i> <!-- FontAwesome ikonica -->
      </span>
      <input type="text" id="grad" placeholder="Vaše mesto stanovanja" required>
    </div>

    <label for="ime">Ulica i broj <span class="required">*</span></label>
     
    <div class="input-group">
      <span class="icon">
          <i class="fas fa-location-dot"></i> <!-- FontAwesome ikonica -->
      </span>
      <input type="text" id="ulica" placeholder="Vaše ulica i broj" required>
    </div>

    <p id="totalPrice"><strong></strong></p>
    <button class="confirm-button" type="submit">Potvrdi porudžbinu</button>
</form>

    
  </div>
</div>



<footer>

  <a href="http://instagram.com/s" id="instaBtn"><img src="slike/insta.JPG" width="40px" height="40px"></a>

  <nav>
    <p>© 2025, Darry Ring Srbija </p>
      <a href="footer_stranice/pol_priv.html">Politika privatnosti</a>
      <a href="footer_stranice/rekla.html">Reklamacije</a>
      <a href="footer_stranice/uslovi.html">Uslovi korišćenja</a>
      <a href="footer_stranice/pol_isp.html">Politika isporuke</a>
      <a href="footer_stranice/kontakt.html">Kontakt informacije</a>
      <a href="footer_stranice/kolac.html">Kolačići</a>
  </nav>

</footer>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <script>
  
       function toggleModal() {
          const modal = document.getElementById('searchModal');
          modal.classList.toggle('active');
        
          const input = document.getElementById('field__input');
          field__input.value="";
        
        }
       
        const more = document.getElementById('contentMore');
        const moreButton = document.getElementById('header__more');
        const moreButtonClose =document.getElementById('header__more_close');

        var tempA =0;
        var tempD =1;


        function toggleMore()
        {
          moreButton.classList.toggle('active');
          moreButtonClose.classList.toggle('active');
         
          if (tempA==1)  more.classList.toggle('deactive'); 

          more.classList.toggle('active'); 
          tempA = 1;
        }

        function toggleMoreClose()
        {
          moreButton.classList.toggle('active');
          moreButtonClose.classList.toggle('active');
        
          if (tempA==1)  more.classList.toggle('deactive'); 
          if (tempA==1) more.classList.toggle('active');
        }


  //////////////////////////////////////////////////////////////////////////////////////////
  
  document.addEventListener("DOMContentLoaded", function() {
    emailjs.init("Q2v33nzqBM2C8eHF6");

    document.getElementById("orderForm").addEventListener("submit", function(event) {
        event.preventDefault();  // Sprečava refresh
        console.log("Submit event prevented!"); // Provera u konzoli

        let formData = {
            name: document.getElementById("ime").value,
            surname: document.getElementById("prezime").value,
            phone: document.getElementById("telefon").value,
            city: document.getElementById("grad").value,
            address: document.getElementById("ulica").value,
        };

        let products = [];
        document.querySelectorAll(".checkout-info").forEach(product => {
            products.push({
                name: product.getAttribute("data-name"),
                size: product.getAttribute("data-size"),
                price: product.getAttribute("data-price"),
                quantity: product.getAttribute("data-quantity")
            });
        });

        let productTable = "<table border='1' cellspacing='0' cellpadding='5'>";
        productTable += "<tr><th>Naziv</th><th>Veličina</th><th>Cena</th><th>Količina</th></tr>";
        products.forEach(p => {
            productTable += `<tr>
                <td>${p.name}</td>
                <td>${p.size}</td>
                <td>${p.price}</td>
                <td>${p.quantity}</td>
            </tr>`;
        });
        productTable += "</table>";

        emailjs.send("service_m2sakc4", "template_f1k5fs7", {
            ...formData,
            product_list: productTable
        }, "Q2v33nzqBM2C8eHF6")
        .then(response => {
            alert("Porudžbina poslata!");
            console.log("Porudžbina poslata!", response);
        }).catch(error => {
            alert("Greška pri slanju: " + JSON.stringify(error));
            console.log("Greška pri slanju:", error);
        });

        return false;  // Sprečava refresh na starim browserima
    });
});

        
      


        
      </script>
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>      
<script src="script.js" defer></script>
<script src="script_korpa.js" defer></script>
</body>
</html>